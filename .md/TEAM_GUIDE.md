# SafeGuard 팀 운영 가이드

## 1. 협업 및 버전 관리 (Git)

팀장으로서 가장 먼저 해야 할 일은 엄격한 코드 관리 규칙을 세우는 것입니다.

### 브랜치 전략 (Branching Strategy)
**Gitflow** 혹은 **Feature Branch** 방식을 간소화해서 사용하세요:
- **`main`**: 언제든 배포 가능한 제품 상태. (이 브랜치는 보호되어야 합니다!)
- **`develop`**: 개발된 기능들이 모이는 통합 브랜치.
- **`feature/기능명`**: 개별 기능을 개발할 때 `develop`에서 따서 만드는 브랜치.

### 풀 리퀘스트 (PR) 규칙
- **절대로 `main` 브랜치에 직접 푸시(Push)하지 마세요.**
- 모든 변경사항은 PR(Pull Request)을 통해서만 반영해야 합니다.
- **코드 리뷰**: 최소 1명 이상의 팀원이 승인(Approve)해야 병합(Merge) 가능하도록 설정하세요.
- **PR 체크리스트**:
  - 로컬에서 `docker-compose up`으로 잘 돌아가는가?
  - 새로운 환경변수(`.env`) 추가가 필요한가? (필요하다면 팀원들에게 공유)

---

## 2. 인프라 및 배포 자동화 (CI/CD)

수동으로 배포 명령어를 치는 것은 팀 프로젝트에서 사고의 원인이 됩니다. 자동화가 필수입니다.

### CI (지속적 통합)
- **도구**: GitHub Actions
- **트리거**: `feature` 브랜치 푸시 또는 PR 생성 시.
- **동작**: 
  - Java/React/Python 프로젝트 빌드 테스트.
  - "이 코드가 깨지지 않는지" 기계가 검증.

### CD (지속적 배포)
- **트리거**: `main` 브랜치로 머지(Merge)되었을 때.
- **동작**:
  1. Docker 이미지 빌드.
  2. AWS ECR에 이미지 업로드 (GitHub Secrets 사용).
  3. ECS 서비스 강제 업데이트 (새 버전 배포).
- **효과**: "코드 검사가 끝난 걸 머지하면, 알아서 AWS 서버에 뜹니다."

---

## 3. 로컬 개발 환경 표준화

"내 컴퓨터에서는 되는데?"라는 말이 안 나오게 환경을 통일해야 합니다.

### "명령어 하나로 시작"
팀원들은 다음 명령어만 알면 개발을 시작할 수 있어야 합니다:
```bash
git pull
docker-compose up --build
```
이걸 치면 프론트, 백엔드, AI, DB가 전부 한 번에 실행되어야 합니다.

### 환경변수 관리 (.env)
- **`.env` 파일은 절대로 Git에 올리지 마세요.** (보안 사고 원인 1순위)
- 대신 `.env.example` 파일을 만들어 어떤 변수가 필요한지 껍데기만 알려주세요.
- 실제 값(DB 비번, API키 등)은 메신저나 보안 메모로 따로 공유하세요.

---

## 4. AWS 리소스 관리

### IAM 사용자 (접근 권한)
- **팀장님의 루트(Root) 계정을 공유하지 마세요.**
- 팀원별로 권한이 제한된 IAM 사용자를 만들어주세요:
  - **개발자**: `AmazonEC2ContainerRegistryPowerUser` (이미지 업로드용), `AmazonRDSReadOnlyAccess` (데이터 확인용).
  - **팀장/Ops**: 관리자(Admin) 권한.

### 비용 관리
- **AWS Budgets**을 설정하세요.
- 예: "월 2만원 넘으면 이메일 알림" (GPU 등을 켜놓고 퇴근하는 사고 방지).

### 로그 확인
- 서버에 문제가 생기면 터미널 접속(SSH) 대신 **CloudWatch Logs**를 보는 습관을 들이세요. (우리가 했던 것처럼 로그에 답이 다 있습니다.)

---

## 5. 팀장님의 다음 할 일 (Next Steps)

1.  **GitHub 리포지토리 생성**: 이 프로젝트 폴더를 팀 공유 저장소에 올리세요.
2.  **팀원 초대**: 저장소 설정에서 `Collaborators`로 팀원들을 초대하세요.
3.  **CI/CD 확인**: `deploy.yml` 파일이 올라가면 배포가 잘 되는지 확인하세요.
4.  **환경변수 공유**: `application.properties`에 들어가는 DB 주소, 비번 등을 팀원들에게 안전하게 알려주세요.

---

## 부록: "지금 한 게 CI/CD인가요?"

네, 맞습니다! 우리가 만든 `deploy.yml` 파일이 바로 그 역할을 합니다.

1.  **CI (Continuous Integration - 지속적 통합)**
    - **무엇을 하는가?**: `docker build`
    - **누가 하는가?**: **GitHub가 빌려주는 컴퓨터(Runner)**가 대신 해줍니다.
    - **왜 하는가?**: 개발자가 코드를 올릴 때마다 "이게 컨테이너로 잘 만들어지는 코드인가?"를 기계가 자동으로 검사해 줍니다.

2.  **CD (Continuous Deployment - 지속적 배포)**
    - **무엇을 하는가?**: `docker push` + `aws ecs update-service`
    - **왜 하는가?**: 검증된 코드가 AWS 서버로 **자동 배송**됩니다. 사람이 일일이 명령어를 칠 필요가 없어집니다.
