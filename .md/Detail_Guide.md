# ğŸ“Œ ê¸°ëŠ¥ ì„¤ê³„ ë¬¸ì„œ

ğŸ“Œ ìš´ì˜ ì›ì¹™
PR íƒœê·¸ì— ì²´í¬í•œ í•­ëª©ë§Œ details ì—´ê³  ë‚˜ë¨¸ì§€ëŠ” ì‚­ì œ
ë¦¬ë·° ì‹œ í•„ìš”í•œ ë¶€ë¶„ë§Œ í¼ì³ì„œ í™•ì¸ ê°€ëŠ¥


# ğŸ§  Feature Design & Operation Specification â€” <Detail Page>
> ë¯¼ì› ìƒì„¸ ì¡°íšŒ ë° ê´€ë¦¬ í˜ì´ì§€ (Detail.tsx)

---

## 0ï¸âƒ£ ë¬¸ì„œ í†µì œ ì •ë³´ (Document Control)

### ë¬¸ì„œ ê¸°ë³¸ ì •ë³´
- ë¬¸ì„œ ID: GEN-005
- ê¸°ëŠ¥ëª…: ë¯¼ì› ìƒì„¸ ì¡°íšŒ (Complaint Detail)
- ì‹œìŠ¤í…œëª…: SafeGuard Frontend
- ì‘ì„±ì: AI Agent
- ê²€í† ì: Tech Lead
- ìŠ¹ì¸ì: PM

### ë¬¸ì„œ ì´ë ¥ ê´€ë¦¬
| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ìš”ì•½ | ì‘ì„±ì |
|----|----|---------|------|
| 1.0 | 2026-01-17 | ìµœì´ˆ ì‘ì„± | AI Agent |

### ë¬¸ì„œ ìƒíƒœ
- [ ] Draft
- [x] In Review
- [ ] Approved
- [ ] Deprecated

---

## 1ï¸âƒ£ ë¹„ì¦ˆë‹ˆìŠ¤ ì»¨í…ìŠ¤íŠ¸ (Business Context)

### 1.1 ë¹„ì¦ˆë‹ˆìŠ¤ ëª©ì 
- ì ‘ìˆ˜ëœ ë¯¼ì›ì˜ ì²˜ë¦¬ ìƒíƒœì™€ ìƒì„¸ ë‚´ìš©, ë‹´ë‹¹ì ë‹µë³€ì„ íˆ¬ëª…í•˜ê²Œ ê³µê°œ.
- ì‹œë¯¼ë“¤ì´ ê³µê°(ì¢‹ì•„ìš”)ì„ í†µí•´ ì—¬ë¡ ì„ í˜•ì„±í•˜ê³ , ë‹´ë‹¹ìëŠ” ë¯¼ì›ì„ ì²˜ë¦¬ ë° ê´€ë¦¬.

### 1.2 ì‚¬ìš©ì ê´€ì  ê°€ì¹˜
- ë‚´ ë¯¼ì›ì´ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ê³  ìˆëŠ”ì§€ ì‹¤ì‹œê°„ í™•ì¸.
- ë‹¤ë¥¸ ì‚¬ëŒì˜ ë¯¼ì›ì„ ë³´ê³  ì •ë³´ ìŠµë“ ë° ê³µê° í‘œì‹œ.

---

## 2ï¸âƒ£ ë¬¸ì œ ì •ì˜ (Problem Statement)

### 2.1 ë°œìƒ ë°°ê²½
- ë¯¼ì› ì²˜ë¦¬ ê³¼ì •ì˜ ë¶ˆíˆ¬ëª…ì„±ì€ í–‰ì • ë¶ˆì‹ ì„ ì´ˆë˜í•¨.
- ë¯¼ê°í•œ ê°œì¸ ì •ë³´ê°€ í¬í•¨ëœ ë¯¼ì›ì€ ë³´í˜¸ë˜ì–´ì•¼ í•¨.

---

## 3ï¸âƒ£ ìš”êµ¬ì‚¬í•­ ì •ì˜ (Requirements)

### 3.1 ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (Functional Requirements)

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|---|--------|--------|
| FR-1 | ë¯¼ì› ìƒì„¸ ì •ë³´(ì œëª©, ë‚´ìš©, ì´ë¯¸ì§€, ìœ„ì¹˜, ìƒíƒœ)ë¥¼ í‘œì‹œí•´ì•¼ í•œë‹¤. | Must |
| FR-2 | ì²˜ë¦¬ ìƒíƒœ(ë¯¸ì²˜ë¦¬ -> ì²˜ë¦¬ì¤‘ -> ì²˜ë¦¬ì™„ë£Œ)ë¥¼ ì§„í–‰ ë°”(Progress Bar)ë¡œ ì‹œê°í™”í•´ì•¼ í•œë‹¤. | Must |
| FR-3 | ë¹„ê³µê°œ ê²Œì‹œë¬¼ì€ ì‘ì„±ìì™€ ë‹´ë‹¹ ê¸°ê´€ë§Œ ì—´ëŒ ê°€ëŠ¥í•˜ë„ë¡ ì°¨ë‹¨í•´ì•¼ í•œë‹¤. | Must |
| FR-4 | ë‹´ë‹¹ ê¸°ê´€ ê´€ë¦¬ìëŠ” ìƒíƒœë¥¼ ë³€ê²½í•˜ê³  ë‹µë³€ì„ ë“±ë¡/ìˆ˜ì •í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. | Must |
| FR-5 | ì¼ë°˜ ì‚¬ìš©ìëŠ” â€˜ì¢‹ì•„ìš”/ì‹«ì–´ìš”â€™ë¡œ ë°˜ì‘ì„ ë‚¨ê¸¸ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. | Must |

---

## 4ï¸âƒ£ ê¸°ëŠ¥ ì±…ì„ ë° ê²½ê³„ (Responsibility & Boundary)

### 4.1 ì±…ì„ ë²”ìœ„
- ë°ì´í„° ë¡œë”© ë° ë Œë”ë§, ê¶Œí•œë³„ UI ë¶„ê¸°(ì¼ë°˜ì¸/ì‘ì„±ì/ë‹´ë‹¹ì), ì¸í„°ë™ì…˜(ì¢‹ì•„ìš”, ë‹µë³€) ì²˜ë¦¬.

### 4.2 ê²½ê³„ ëª…í™•í™” ì´ìœ 
- ë°ì´í„°ì˜ ë¬´ê²°ì„±(ì‘ì„±ì í™•ì¸ ë“±)ì€ ë°±ì—”ë“œì—ì„œ ê²€ì¦.

---

## 5ï¸âƒ£ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ìƒì„¸ (Architecture)

### 5.1 ë…¼ë¦¬ ì•„í‚¤í…ì²˜
- `Detail.tsx` -> `complaintsAPI` (CRUD, Reaction), `authAPI` (User Info)
- Components: `StatusBadge`, `ImageDisplay`, `Modal`

### 5.4 ê¸°ìˆ  ìŠ¤íƒ (Technology Stack)
- React Hooks (`useParams`, `useLocation`)
- CSS-in-JS (Inline Styles)

---

## 6ï¸âƒ£ End-to-End ì²˜ë¦¬ íë¦„ (E2E Flow)

```text
[User Access /reports/:id]
  â†“
[Fetch Detail Data & User Info] --(Private & No Auth)--> [Access Denied UI]
  â†“
[Render Page]
  â†“
(Role: Admin) -> [Show Edit Answer/Status Controls]
(Role: User)  -> [Show Like/Dislike Buttons]
```

---

## 7ï¸âƒ£ ìƒì„¸ ì„¤ê³„ (Detailed Design)

### 7.1 ë‚´ë¶€ ìƒíƒœ ë¨¸ì‹  (State Machine)
- **View Mode**: ì¼ë°˜ ì¡°íšŒ
- **Edit Mode**: ë‹µë³€ ì‘ì„±/ìˆ˜ì • ì¤‘ (`isEditing=true`)

### 7.2 í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë° ì‚°ì¶œ ê³µì‹ (Core Business Logic & Formulas)
- **ê¶Œí•œ ì²´í¬**:
  ```javascript
  const isAssignedAgencyAdmin = (user.role === 'AGENCY') && (report.isAssignedToMe);
  ```
- **ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹**: ì´ë¦„ì´ 2ìë©´ 'ê¹€*', 3ì ì´ìƒì´ë©´ 'ê¹€*ë™' ë“±ìœ¼ë¡œ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ (`maskName` í•¨ìˆ˜).
- **ì§„í–‰ë¥  ê³„ì‚°**: ìƒíƒœ ë°°ì—´ ì¸ë±ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ 0% / 50% / 100% ê³„ì‚°.

### 7.4 ì¸í„°í˜ì´ìŠ¤ ë° API ì„¤ê³„ (Interface & API Design)
- **GET `/api/complaints/:id`**: ìƒì„¸ ì¡°íšŒ.
- **PATCH `/api/complaints/:id/status`**: ìƒíƒœ ë³€ê²½.
- **PATCH `/api/complaints/:id/answer`**: ë‹µë³€ ë“±ë¡.
- **DELETE `/api/complaints/:id`**: ì‚­ì œ.

---

## 8ï¸âƒ£ ì˜ˆì™¸Â·ì˜¤ë¥˜ ì²˜ë¦¬ ì„¤ê³„ (Exception & Error Handling)

### 8.1 ì˜¤ë¥˜ ë¶„ë¥˜
- **ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ**: ë¹„ë°€ê¸€ ì ‘ê·¼ ì‹œ 403 ëŒ€ì‘ ë©”ì‹œì§€ í‘œì‹œ.
- **ë°ì´í„° ì—†ìŒ**: ì˜ëª»ëœ ID ì ‘ê·¼ ì‹œ 404 ëŒ€ì‘ ë©”ì‹œì§€ í‘œì‹œ.

---

## 1ï¸âƒ£7ï¸âƒ£ ë¬¸ì„œ ì—°ê³„ (Documentation Linkage)
- ê´€ë ¨ íŒŒì¼: `Detail.tsx`
