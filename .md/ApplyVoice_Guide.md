# ğŸ“Œ ê¸°ëŠ¥ ì„¤ê³„ ë¬¸ì„œ

ğŸ“Œ ìš´ì˜ ì›ì¹™
PR íƒœê·¸ì— ì²´í¬í•œ í•­ëª©ë§Œ details ì—´ê³  ë‚˜ë¨¸ì§€ëŠ” ì‚­ì œ
ë¦¬ë·° ì‹œ í•„ìš”í•œ ë¶€ë¶„ë§Œ í¼ì³ì„œ í™•ì¸ ê°€ëŠ¥


# ğŸ§  Feature Design & Operation Specification â€” <ApplyVoice Page>
> ìŒì„± ë¯¼ì› ì‹ ì²­ í˜ì´ì§€ (ApplyVoice.tsx)

---

## 0ï¸âƒ£ ë¬¸ì„œ í†µì œ ì •ë³´ (Document Control)

### ë¬¸ì„œ ê¸°ë³¸ ì •ë³´
- ë¬¸ì„œ ID: GEN-004
- ê¸°ëŠ¥ëª…: ìŒì„± ê¸°ë°˜ ë¯¼ì› ì‹ ì²­ (Voice Application)
- ì‹œìŠ¤í…œëª…: SafeGuard Frontend
- ì‘ì„±ì: AI Agent
- ê²€í† ì: Tech Lead
- ìŠ¹ì¸ì: PM

### ë¬¸ì„œ ì´ë ¥ ê´€ë¦¬
| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ìš”ì•½ | ì‘ì„±ì |
|----|----|---------|------|
| 1.0 | 2026-01-17 | ìµœì´ˆ ì‘ì„± | AI Agent |

### ë¬¸ì„œ ìƒíƒœ
- [ ] Draft
- [x] In Review
- [ ] Approved
- [ ] Deprecated

---

## 1ï¸âƒ£ ë¹„ì¦ˆë‹ˆìŠ¤ ì»¨í…ìŠ¤íŠ¸ (Business Context)

### 1.1 ë¹„ì¦ˆë‹ˆìŠ¤ ëª©ì 
- íƒ€ì´í•‘ì´ ì–´ë µê±°ë‚˜ ê¸´ë°•í•œ ìƒí™©ì—ì„œ ì‚¬ìš©ìê°€ ë§ë¡œ ì‰½ê²Œ ë¯¼ì›ì„ ì ‘ìˆ˜í•  ìˆ˜ ìˆë„ë¡ í•¨.
- ê³ ë ¹ì¸µ ë° ë””ì§€í„¸ ì†Œì™¸ ê³„ì¸µì˜ ì ‘ê·¼ì„± ê°•í™”.

### 1.2 ì‚¬ìš©ì ê´€ì  ê°€ì¹˜
- "ë§í•˜ëŠ” ëŒ€ë¡œ" ë¯¼ì›ì´ ì‘ì„±ë˜ëŠ” ë§ˆë²• ê°™ì€ ê²½í—˜ ì œê³µ.
- í…ìŠ¤íŠ¸ ì…ë ¥ì˜ í”¼ë¡œë„ ê°ì†Œ.

---

## 2ï¸âƒ£ ë¬¸ì œ ì •ì˜ (Problem Statement)

### 2.1 ë°œìƒ ë°°ê²½
- ì¥ë¬¸ì˜ í…ìŠ¤íŠ¸ë¥¼ ëª¨ë°”ì¼ì—ì„œ ì…ë ¥í•˜ëŠ” ê²ƒì€ ì‚¬ìš©ì ì´íƒˆì˜ ì£¼ëœ ì›ì¸ì„.
- ê¸°ì¡´ ARSë‚˜ ì „í™” ë¯¼ì›ì€ ì¦ê±° ìë£Œ(ì‚¬ì§„/ìœ„ì¹˜) ì²¨ë¶€ê°€ ì–´ë µê³  ëŒ€ê¸° ì‹œê°„ì´ ê¸º.

---

## 3ï¸âƒ£ ìš”êµ¬ì‚¬í•­ ì •ì˜ (Requirements)

### 3.1 ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (Functional Requirements)

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|---|--------|--------|
| FR-1 | ë§ˆì´í¬ ê¶Œí•œì„ íšë“í•˜ê³  ì‚¬ìš©ìì˜ ìŒì„±ì„ ë…¹ìŒí•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. | Must |
| FR-2 | ë…¹ìŒ ì¤‘ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¸ì‹ëœ í…ìŠ¤íŠ¸(Preview)ë¥¼ ë³´ì—¬ì£¼ì–´ì•¼ í•œë‹¤. | Should |
| FR-3 | ë…¹ìŒ ì¢…ë£Œ ì‹œ ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì„œë²„ë¡œ ì „ì†¡í•˜ì—¬ ê³ í’ˆì§ˆ STT ë³€í™˜ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. | Must |
| FR-4 | ë³€í™˜ëœ í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©ìê°€ ìˆ˜ì •í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. | Must |
| FR-5 | ë³€í™˜ëœ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ AIê°€ ë¯¼ì› ìœ í˜•ê³¼ ë‹´ë‹¹ ê¸°ê´€ì„ ë¶„ë¥˜í•´ì•¼ í•œë‹¤. | Must |

---

## 4ï¸âƒ£ ê¸°ëŠ¥ ì±…ì„ ë° ê²½ê³„ (Responsibility & Boundary)

### 4.1 ì±…ì„ ë²”ìœ„
- ì˜¤ë””ì˜¤ ìº¡ì²˜, ì¸ì½”ë”©, ì„œë²„ ì „ì†¡, ë³€í™˜ ê²°ê³¼ UI ë°”ì¸ë”©.

### 4.2 ê²½ê³„ ëª…í™•í™” ì´ìœ 
- ìŒì„± ì¸ì‹(STT) ëª¨ë¸ì€ ì„œë²„ ì¸¡ì—ì„œ ìˆ˜í–‰ (OpenAI Whisper ë“±).

---

## 5ï¸âƒ£ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ìƒì„¸ (Architecture)

### 5.1 ë…¼ë¦¬ ì•„í‚¤í…ì²˜
- `ApplyVoice.tsx`
  - `MediaRecorder API` (Audio Capture)
  - `Web Speech API` (Real-time Preview)
  - `sttAPI` (Server Transcribe)
  - `analyzeText` (Classification)

### 5.4 ê¸°ìˆ  ìŠ¤íƒ (Technology Stack)
- Frontend: React, Web Audio API
- Backend: Python/FastAPI (STT Service)

---

## 6ï¸âƒ£ End-to-End ì²˜ë¦¬ íë¦„ (E2E Flow)

```text
[User Click Record]
  â†“
[Browser: Capture Audio stream]
  â†“
[User Speak] -> [Web Speech API: Show Preview]
  â†“
[User Click Stop]
  â†“
[Browser: Create Audio Blob (webm/wav)]
  â†“
[Call POST /api/stt/transcribe]
  â†“
[Server: Whisper Inference]
  â†“
[Identify Text]
  â†“
[User Edit & Confirm]
  â†“
[AI Analysis & Submit]
```

---

## 7ï¸âƒ£ ìƒì„¸ ì„¤ê³„ (Detailed Design)

### 7.1 ë‚´ë¶€ ìƒíƒœ ë¨¸ì‹  (State Machine)
- **Idle**: ëŒ€ê¸°
- **Recording**: ë…¹ìŒ ì¤‘ (Timer ë™ì‘)
- **Transcribing**: ì„œë²„ ë³€í™˜ ìš”ì²­ ì¤‘ (Loading)
- **Review**: ë³€í™˜ ì™„ë£Œ ë° ìˆ˜ì • ëŒ€ê¸°

### 7.2 í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë° ì‚°ì¶œ ê³µì‹ (Core Business Logic & Formulas)
- **ì˜¤ë””ì˜¤ í¬ë§· ê²°ì •**: `MediaRecorder.isTypeSupported('audio/webm')` ì²´í¬í•˜ì—¬ ì§€ì› í¬ë§· ì„ íƒ.
- **í•„í„°ë§ ë¡œì§**: ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°ì—ì„œ í•œê¸€/ìˆ«ì/ê¸°ë³¸ ë¬¸ì¥ë¶€í˜¸ ì™¸ì˜ íŠ¹ìˆ˜ë¬¸ìë‚˜ ë„ˆë¬´ ì§§ì€ ë°œí™”ëŠ” í•„í„°ë§í•˜ì—¬ ë…¸ì´ì¦ˆ ê°ì†Œ.

### 7.4 ì¸í„°í˜ì´ìŠ¤ ë° API ì„¤ê³„ (Interface & API Design)
1.  **POST `/api/stt/transcribe`**
    -   Input: `FormData(file: Blob, text: string)`
    -   Output: `{ stt_text: string }`

---

## 8ï¸âƒ£ ì˜ˆì™¸Â·ì˜¤ë¥˜ ì²˜ë¦¬ ì„¤ê³„ (Exception & Error Handling)

### 8.1 ì˜¤ë¥˜ ë¶„ë¥˜
- **ë§ˆì´í¬ ê¶Œí•œ ê±°ë¶€**: ë¸Œë¼ìš°ì € ì„¤ì • ì•ˆë‚´ í•„ìš”.
- **STT ë³€í™˜ ì‹¤íŒ¨**: ì„œë²„ ì˜¤ë¥˜ ë˜ëŠ” ìŒì§ˆ ë¶ˆëŸ‰.

### 8.2 ì‚¬ìš©ì ë©”ì‹œì§€
- "ë§ˆì´í¬ ì ‘ê·¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."
- "ìŒì„± ì¸ì‹ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."

---

## 1ï¸âƒ£7ï¸âƒ£ ë¬¸ì„œ ì—°ê³„ (Documentation Linkage)
- ê´€ë ¨ íŒŒì¼: `ApplyVoice.tsx`, `ai/stt/app.py`
